<!DOCTYPE html>
<html>
<title>Stats</title>

<head>
	<style>
		table, tr, td, th {
			border: 1px solid black;
		}
		th, td {
			width: 300px;
			padding: 5px;
		}
		button {
			margin: 20px;
			width: 10%;
			height: 8%;
			font-size: 18px;
			border-radius: 10px;
		}
	</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
	function refreshPage() {
		var xhttp = new XMLHttpRequest();
		xhttp.open("GET", "Statistics", false);
		xhttp.send();
		var obj = JSON.parse(xhttp.responseText);
		var computeList = obj.compute_time;
		var addrList = obj.address;
		var receivedList = obj.received_time;
		var resultList = obj.result;
		
		document.getElementById("results").innerHTML = "";

		$("#results").append('<h1>Welcome, Administrator</h1>' + '<h2>Computation Statistics:</h2>' );

		var d = new Date(); 
		$("#results").append('Last Updated At: ' + d);


		var str = '<table><tr><th>Time Computation Received </th>' + '<th>Time Taken</th>' + '<th>IP Address</th>' 
		+ '<th>Returned Result</th></tr>';

		//loop through lists, each list is of the same length
		for(i=0; i<computeList.length; i++) {

			str += '<tr><td>' + receivedList[i] + '</td>'
				+ '<td>' + computeList[i] + '</td>'
				+ '<td>' + addrList[i] + '</td>'
				+ '<td>' + resultList[i] + '</td>'
				+ '</tr>';
		}
		str += '</table>';

		$("#results").append(str);
	}

	function logOut() {
		sessionStorage.removeItem('user'); 
		window.location.href = "HomePage.html"; 
	}
</script>
</head>

<body style = "background-color:#7986cb;">
<img src="" alt="Insert Logo Here" height="42" width="42">

<div id = "results">
<script> refreshPage(); </script>

</div>
	<div id = "buttons">
		<button id = "updatebutton" style = "font-size: 10pt" onclick="refreshPage()"> Refresh </button>
		<button id = "logout" style = "font-size: 10pt" onclick = "logOut()" > Logout </button>
	</div>

</body>